(this["webpackJsonpalgorand-restricted-checkout"]=this["webpackJsonpalgorand-restricted-checkout"]||[]).push([[0],{120:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(53),i=n.n(a),o=(n(120),n(197)),s=n(6),l=n(100),d=n(194),j=n(82),b=n(22),h=n(9),x=n(79),u=n(104),m=n(192),p=n(193),O=n(19),g=n(24),f=n(25),w=n(4),S=function(e){var t=e.price,n=e.url;return Object(w.jsxs)(l.a,{alignItems:"center",children:[Object(w.jsx)(O.a,{fontSize:4,children:t}),Object(w.jsx)(g.a,{name:"Algo",ml:1}),Object(w.jsx)(b.b,{to:n,children:Object(w.jsx)(f.a,{icon:"ShoppingCart",ml:3,children:"Buy Now!"})})]})},k=function(e){var t=e.id,n=e.name,c=e.description,r=e.price,a=e.image,i=e.isNew;return Object(w.jsx)(s.b,{p:3,width:[1,.5,.33,.25],children:Object(w.jsxs)(u.a,{p:4,children:[i&&Object(w.jsx)(s.b,{position:"absolute",right:2,top:2,children:Object(w.jsx)(m.a,{color:"green",children:"New!"})}),Object(w.jsx)(p.a,{alt:n,src:a,mb:3}),Object(w.jsx)(d.a,{as:"h2",mb:3,children:n}),Object(w.jsx)(s.b,{mb:3,children:Object(w.jsx)(O.a,{children:c})}),Object(w.jsx)(S,{price:r,url:"/checkout/".concat(t)})]})})},y=n(55),C=function(){return Object(w.jsx)(l.a,{flexWrap:"wrap",children:y.map((function(e){return Object(c.createElement)(k,Object(x.a)(Object(x.a)({},e),{},{key:e.id}))}))})},I=n(196),v=n(200),A=n(105),E=n(106),T=n(115),_=n(114),D=n(198),P=n(195),L=n(199),R=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(A.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={status:"ready",transactionId:""},e.handleSend=function(t){e.setState({status:"done",transactionId:t})},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props,t=e.wallet,n=e.item,c=e.pipeline,r=this.state,a=r.status,i=r.transactionId,o=1e6*n.price;return Object(w.jsx)(s.b,{width:"100%",maxWidth:"800px",children:"ready"===a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{children:"Connected wallet address (your wallet)"}),Object(w.jsx)(D.a,{textLabels:!0,address:t.address}),Object(w.jsxs)(O.a,{children:["Current wallet balance ",t.balance]}),Object(w.jsxs)(O.a,{mt:4,textAlign:"right",children:['Click "Send" button to pay ',Object(w.jsxs)("strong",{children:[n.price," ALGO"]})," for the ",Object(w.jsx)("strong",{children:n.name})," and finalize your order"]}),Object(w.jsxs)(l.a,{mt:1,justifyContent:"space-between",children:[Object(w.jsx)(b.b,{to:"/",style:{textDecoration:"none"},children:Object(w.jsx)(f.a,{icon:"LinkIcon",mainColor:"secondary",contrastColor:"darkgrey",border:"1px solid",children:"Go back to the Homepage"})}),Object(w.jsx)(P.a,{index:0,recipient:"NACDZLV32O5KVEALW2PYS3MSMIECXXHGSYVYAJ6JJIUZUTZGG6T6IOCR3I",amount:o,note:"Order itemId: ".concat(n.id," itemName: ").concat(n.name),wallet:c,returnTo:"txID",context:this,onChange:this.handleSend})]})]}):Object(w.jsx)(l.a,{justifyContent:"center",width:"100%",children:Object(w.jsxs)(l.a,{width:"100%",maxWidth:"600px",alignItems:"flex-end",flexDirection:"column",children:[Object(w.jsx)(L.a.Success,{width:"100%",message:"Payment sent",secondaryMessage:"Transaction ID: ".concat(i),actionText:""}),Object(w.jsx)(b.b,{to:"/",children:Object(w.jsx)(f.a,{icon:"LinkIcon",mt:3,children:"Go back to the Homepage"})})]})})})}}]),n}(r.a.Component),G=n(23),N=n.n(G),W=n(113),F=n(78),H=F.a.init();console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/algorand-restricted-checkout",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RECIPIENT_ADDRESS:"NACDZLV32O5KVEALW2PYS3MSMIECXXHGSYVYAJ6JJIUZUTZGG6T6IOCR3I",REACT_APP_USE_TESTNET:"true"})),F.a.main=!1;var J=function(e){var t=e.message,n=e.handleRetry;return Object(w.jsx)(l.a,{justifyContent:"center",width:"100%",children:Object(w.jsxs)(l.a,{width:"100%",maxWidth:"500px",alignItems:"flex-end",flexDirection:"column",children:[Object(w.jsx)(L.a.Failure,{width:"100%",message:"Error",secondaryMessage:t,actionText:""}),Object(w.jsxs)(s.b,{children:[Object(w.jsx)(b.b,{to:"/",children:Object(w.jsx)(f.a,{icon:"LinkIcon",mt:3,children:"Go back to the Homepage"})}),Object(w.jsx)(f.a,{icon:"Sync",mt:3,ml:3,onClick:n,children:"Retry"})]})]})})},U=function(){var e,t=Object(h.f)().itemId,n=y.find((function(e){return"".concat(e.id)===t})),c=Object(v.a)((e=(null===n||void 0===n?void 0:n.price)||0,Object(W.a)(N.a.mark((function t(){var n,c,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",c=0,t.prev=2,t.next=5,F.a.connect(H);case 5:n=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error("connection error: ",t.t0.message);case 11:if(n){t.next=13;break}throw new Error("Connection error or wallet window closed");case 13:return t.prev=13,t.next=16,F.a.balance(n);case 16:r=t.sent,c=parseFloat(r),console.log(c),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(13),console.error("balance error: ",t.t1.message);case 24:if(c&&!(c<e)){t.next=26;break}throw new Error("You must have at least ".concat(e," Algos. Top up your wallet."));case 26:return t.abrupt("return",{address:n,balance:c});case 27:case"end":return t.stop()}}),t,null,[[2,8],[13,21]])})))),[]);return Object(w.jsx)(l.a,{flexGrow:1,width:"100%",justifyContent:"center",alignItems:"center",children:c.loading?Object(w.jsxs)(l.a,{alignItems:"center",children:[Object(w.jsx)(I.a,{color:"primary",size:"100px"}),Object(w.jsx)(O.a,{ml:4,children:"Checking available Algorand Wallet balance"})]}):!c.error&&c.value&&n?Object(w.jsx)(R,{wallet:c.value,item:n,pipeline:H}):Object(w.jsx)(J,{message:c.error?c.error.message:"Unexpected error. Please retry.",handleRetry:function(){return c.retry()}})})};var M=function(){return Object(w.jsx)(o.a,{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:Object(w.jsxs)(b.a,{basename:"/algorand-restricted-checkout",children:[Object(w.jsx)(s.b,{as:"header",backgroundColor:"grey",pt:2,pb:2,children:Object(w.jsx)(b.b,{to:"/",style:{textDecoration:"none",color:"inherit"},children:Object(w.jsxs)(l.a,{maxWidth:1400,margin:"0 auto",alignItems:"center",pl:3,pr:3,children:[Object(w.jsx)(j.a,{color:"black",size:"80"}),Object(w.jsx)(d.a,{as:"h1",ml:10,children:"Algorand Demo Store"})]})})}),Object(w.jsx)(s.b,{height:1}),Object(w.jsx)(l.a,{as:"main",maxWidth:1400,margin:"0 auto",flexGrow:1,width:"100%",flexDirection:"column",children:Object(w.jsxs)(h.c,{children:[Object(w.jsx)(h.a,{path:"/checkout/:itemId",children:Object(w.jsx)(U,{})}),Object(w.jsx)(h.a,{path:"/",children:Object(w.jsx)(C,{})})]})})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,201)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(M,{})}),document.getElementById("root")),V()},55:function(e){e.exports=JSON.parse('[{"id":1,"image":"https://www.algorand.com/assets/media-kit/logos/full/png/algorand_full_logo_black.png","name":"Algorand test item 1","description":"Some description of the item that is being sold on this App","price":5,"isNew":true},{"id":2,"image":"https://www.algorand.com/assets/media-kit/logos/full/png/algorand_full_logo_black.png","name":"Algorand test item 2","description":"Some description of the item that is being sold on this App","price":11},{"id":3,"image":"https://www.algorand.com/assets/media-kit/logos/full/png/algorand_full_logo_black.png","name":"Algorand test item 3","description":"Some description of the item that is being sold on this App","price":30}]')}},[[189,1,2]]]);
//# sourceMappingURL=main.4e33b395.chunk.js.map